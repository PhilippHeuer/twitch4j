plugins {
    id "idea"
    id "maven"
    id "eclipse"
    id "maven-publish"
    id "net.ltgt.apt" version "0.14"
    id "com.jfrog.bintray" version "1.7.3"
}

ext {
    jacksonVersion = "2.9.4"
    jwtVersion = "3.3.0"
    jettyVersion = "9.4.8.v20171121"
    okhttpVersion = "3.10.0"
    guavaVersion = "24.0"
    apacheCommonsIOVersion = "2.6"
    apacheCommonsLang3Version = "3.7"
    logbackVersion = "1.2.3"
    slf4jVersion = "1.7.25"
    picocliVersion = "2.3.0"
    vertxVersion = "3.5.1"
    lombokVersion = "1.16.20"
    immutablesVersion = "2.5.5"
    junitVersion = "4.12"
}

allprojects {
    group = 'com.github.twitch4j'

    version = "0.11.0-SNAPSHOT"

    repositories {
        jcenter()
    }
}

subprojects {
    apply plugin: "java"
    apply plugin: "net.ltgt.apt"

    sourceCompatibility = 1.8
    targetCompatibility = 1.8

    version = rootProject.version

    dependencies {

        compile "org.slf4j:slf4j-api:${slf4jVersion}"

        compileOnly "org.immutables:value:${immutablesVersion}"
        annotationProcessor "org.immutables:value:${immutablesVersion}"
//        annotationProcessor "org.immutables:builder:${immutablesVersion}"
//        annotationProcessor "org.immutables:gson:${immutablesVersion}:annotations"

        compileOnly "org.projectlombok:lombok:${lombokVersion}"    // Getters, Setters and more.
        annotationProcessor "org.projectlombok:lombok:${lombokVersion}"

        testCompile "junit:junit:${junitVersion}"
    }
}

publishing {
    publications {
        core(MavenPublication) {
            from project(":core").components.java
            groupId group
            artifact "twitch4j"
            version version
        }

        android(MavenPublication) {
            from project(":android").components.java
            groupId group
            artifact "twitch4j-android"
            version version
        }
    }
}

bintray {
    user = System.getenv('BINTRAY_USER')
    key = System.getenv('BINTRAY_API_KEY')
    publications = ['core', 'android']
}

wrapper {
    distributionType = Wrapper.DistributionType.ALL
    gradleVersion = "4.6" // newer version
}